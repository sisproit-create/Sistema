import streamlit as st
from state_init import init_session_state

init_session_state()

st.title("üìä Sistema de Trading para Libertad Financiera")

st.markdown("---")

# =========================================================
# ‚òÄÔ∏è MANTRA OPERATIVO DIARIO
# =========================================================

st.header("‚òÄÔ∏è MANTRA OPERATIVO DIARIO")
st.caption("Leer en voz alta antes de abrir el mercado")

st.markdown("""
‚òê Hoy solo tengo una tarea: ejecutar mi proceso con disciplina.  
‚òê No persigo dinero, persigo consistencia.  
‚òê Mi capital crece como resultado de hacer bien el proceso, una y otra vez.  
‚òê Mantengo control emocional, sigo mis reglas y respeto mis invalidaciones.  
‚òê La constancia es mi ventaja.  
‚òê La constancia me lleva al mill√≥n.
""")

st.markdown("---")

# =========================================================
# üß† MANUAL OPERATIVO
# =========================================================

st.header("üß† MANUAL OPERATIVO")
st.subheader("SISTEMA DE TRADING PARA LIBERTAD FINANCIERA")

st.markdown("""
## üîí Principio Rector
**El proceso manda. El dinero obedece.**
""")

# ---------------------------------------------------------
# 1Ô∏è‚É£ OBJETIVO
# ---------------------------------------------------------

st.markdown("""
## 1Ô∏è‚É£ OBJETIVO DEL SISTEMA

Construir disciplina, constancia y control emocional mediante la ejecuci√≥n repetida de un proceso simple de trading, con el fin de escalar capital de forma progresiva hasta alcanzar libertad financiera.

Este sistema no existe para ganar hoy.  
Existe para sostener resultados en el tiempo.
""")

# ---------------------------------------------------------
# 2Ô∏è‚É£ IDENTIDAD OPERATIVA
# ---------------------------------------------------------

st.markdown("""
## 2Ô∏è‚É£ IDENTIDAD OPERATIVA (ANTES DE OPERAR)

Antes de abrir el mercado, confirmo:

‚Ä¢ Soy una persona disciplinada y constante.  
‚Ä¢ Mi tarea es ejecutar el proceso, no perseguir dinero.  
‚Ä¢ Opero solo si estoy emocionalmente estable.  
‚Ä¢ Acepto p√©rdidas sin reaccionar.  

üìå Si esta identidad no est√° activa, no opero.
""")

# ---------------------------------------------------------
# 3Ô∏è‚É£ ACTIVACI√ìN DIARIA
# ---------------------------------------------------------

st.markdown("""
## 3Ô∏è‚É£ ACTIVACI√ìN DIARIA (FILTRO DE PERMISO)

Solo opero si todas son afirmativas:

‚òê Le√≠ el mantra operativo.  
‚òê Revis√© el checklist diario.  
‚òê El mercado cumple mis condiciones.  
‚òê Estoy dispuesto a cerrar sesi√≥n aunque pierda.  

‚ùå Una sola negativa = no operar.

Este filtro protege el capital y protege la mente.
""")

# ---------------------------------------------------------
# 4Ô∏è‚É£ EJECUCI√ìN CONTROLADA
# ---------------------------------------------------------

st.markdown("""
## 4Ô∏è‚É£ EJECUCI√ìN CONTROLADA

Durante la sesi√≥n:

‚Ä¢ Opero √∫nicamente Setups A / B / C.  
‚Ä¢ Respeto el riesgo diario m√°ximo definido.  
‚Ä¢ Opero dentro del horario establecido (cierro aunque el mercado siga).  
‚Ä¢ No improviso.  
‚Ä¢ No intento ‚Äúrecuperar‚Äù.  

üìå Si una operaci√≥n no encaja claramente en el sistema, no existe.
""")

# ---------------------------------------------------------
# 5Ô∏è‚É£ CIERRE DE SESI√ìN
# ---------------------------------------------------------

st.markdown("""
## 5Ô∏è‚É£ CIERRE DE SESI√ìN (OBLIGATORIO)

Al finalizar:

‚Ä¢ Cierro la plataforma.  
‚Ä¢ No reviso el mercado despu√©s.  
‚Ä¢ No agrego operaciones tard√≠as.  

### Evaluaci√≥n diaria (no monetaria)

‚òê Segu√≠ el proceso.  
‚òê Respet√© mis reglas.  
‚òê Control√© mis emociones.  

üìå Un d√≠a bien ejecutado es un d√≠a ganado, incluso si hubo p√©rdida.
""")

# ---------------------------------------------------------
# 6Ô∏è‚É£ BUCLE DE CONSISTENCIA
# ---------------------------------------------------------

st.markdown("""
## 6Ô∏è‚É£ BUCLE DE CONSISTENCIA

El sistema se ejecuta igual todos los d√≠as.

Repetici√≥n ‚Üí H√°bito ‚Üí Confianza ‚Üí Consistencia  

No busco perfecci√≥n.  
Busco repetici√≥n correcta.
""")

# ---------------------------------------------------------
# 7Ô∏è‚É£ ESCALADO
# ---------------------------------------------------------

st.markdown("""
## 7Ô∏è‚É£ ESCALADO DE CAPITAL (REGLA NO NEGOCIABLE)

El capital solo aumenta si se cumplen todas las condiciones:

‚Ä¢ X meses consecutivos siguiendo el sistema.  
‚Ä¢ Drawdown controlado.  
‚Ä¢ Checklist cumplido ‚â• 90%.  

üìå No subo capital por ganar dinero.  
Subo capital por buen comportamiento.  

El comportamiento precede al crecimiento.
""")

# ---------------------------------------------------------
# 8Ô∏è‚É£ RESULTADO ESPERADO
# ---------------------------------------------------------

st.markdown("""
## 8Ô∏è‚É£ RESULTADO ESPERADO (NO OPERATIVO)

Si el sistema se ejecuta correctamente:

‚Ä¢ Ingresos m√°s estables.  
‚Ä¢ Menos horas frente al mercado.  
‚Ä¢ Mayor claridad mental.  
‚Ä¢ Transferencia progresiva a activos pasivos.  
‚Ä¢ M√°s tiempo libre.  

La libertad es consecuencia del proceso sostenido.
""")

# ---------------------------------------------------------
# üîí REGLA FINAL
# ---------------------------------------------------------

st.markdown("""
## üîí REGLA FINAL DEL SISTEMA

Cada d√≠a solo importa una pregunta:

**¬øEjecut√© el sistema correctamente?**

Si la respuesta es s√≠, el sistema est√° funcionando.  
El dinero llegar√° como efecto secundario.
""")

st.markdown("---")
st.header("üß† MARCO T√âCNICO DE EJECUCI√ìN")

# =========================================================
# 1Ô∏è‚É£ CONTEXTO
# =========================================================

st.subheader("1Ô∏è‚É£ CONTEXTO (Antes de ver el gr√°fico)")

st.markdown("""
### üîé ¬øQu√© significa realmente?

Antes de mirar velas peque√±as, necesitas entender el ambiente.
""")

with st.expander("Macro / Noticias"):

    st.markdown("""
Ejemplos de noticias que mueven mercado:

‚Ä¢ Datos de inflaci√≥n (CPI)  
‚Ä¢ Decisiones de la Fed  
‚Ä¢ N√≥minas (NFP)  
‚Ä¢ Resultados de empresas grandes (Amazon, Apple)

### C√≥mo interpretarlo:

**Hay noticia fuerte hoy**
‚Ä¢ M√°s volatilidad  
‚Ä¢ Movimientos violentos  
‚Ä¢ Falsas rupturas frecuentes  
‚Ä¢ Direcci√≥n menos confiable al inicio  

**No hay noticia**
‚Ä¢ Mejor respeto de niveles t√©cnicos  
‚Ä¢ Estructura m√°s limpia  

### Regla clave:
No operas la noticia.  
Operas c√≥mo el precio REACCIONA a ella.

Ejemplo:
Sale CPI fuerte ‚Üí mercado cae.  
Pero si recupera VWAP con volumen ‚Üí eso es lo que operas.
""")

# =========================================================
# 2Ô∏è‚É£ ESTRUCTURA
# =========================================================

st.subheader("2Ô∏è‚É£ ESTRUCTURA (D√≥nde estamos)")

with st.expander("üîπ Tendencia"):
    st.markdown("""
Caracter√≠sticas:
‚Ä¢ HH (Higher High)  
‚Ä¢ HL (Higher Low)  
‚Ä¢ Precio sobre VWAP  
‚Ä¢ Medias inclinadas  

üëâ Interpretaci√≥n:
El mercado acepta precios m√°s altos.

üëâ Aplicaci√≥n:
No vendes.  
Buscas retrocesos para entrar a favor.
""")

with st.expander("üîπ Rango"):
    st.markdown("""
Caracter√≠sticas:
‚Ä¢ M√°ximos y m√≠nimos respetados  
‚Ä¢ VWAP plana  
‚Ä¢ Mechas arriba y abajo  

üëâ Interpretaci√≥n:
Institucionales acumulando o distribuyendo.

üëâ Aplicaci√≥n:
Vendes en techo  
Compras en piso  
Tomas ganancias r√°pido
""")

with st.expander("üîπ Transici√≥n"):
    st.markdown("""
Caracter√≠sticas:
‚Ä¢ Ruptura que falla  
‚Ä¢ Velas grandes con rechazo  
‚Ä¢ Volumen inconsistente  

üëâ Interpretaci√≥n:
El mercado est√° decidiendo direcci√≥n.

üëâ Aplicaci√≥n:
Esperar confirmaci√≥n.
Aqu√≠ se pierde dinero si te anticipas.
""")

# =========================================================
# 3Ô∏è‚É£ NIVELES CLAVE
# =========================================================

st.subheader("3Ô∏è‚É£ NIVELES CLAVE")

st.markdown("""
Esto se marca ANTES de que abra el mercado:

‚Ä¢ PDH (Previous Day High)  
‚Ä¢ PDL (Previous Day Low)  
‚Ä¢ High / Low de premarket  
‚Ä¢ VWAP  
‚Ä¢ N√∫meros redondos (.00 / .50)

¬øPor qu√©?

Porque instituciones miran lo mismo.
Son zonas donde:

‚Ä¢ Se activa liquidez  
‚Ä¢ Se ejecutan √≥rdenes grandes  
‚Ä¢ Se producen falsas rupturas  

Sin niveles, operas en el vac√≠o.
""")

# =========================================================
# 4Ô∏è‚É£ SETUP
# =========================================================

st.subheader("4Ô∏è‚É£ SETUP (Cu√°ndo es operable)")

st.markdown("""
Un trade v√°lido necesita 3 confirmaciones:

1Ô∏è‚É£ Nivel  
Sin nivel = azar.

2Ô∏è‚É£ Vela  
‚Ä¢ Rechazo (mecha larga)  
‚Ä¢ Engulfing  
‚Ä¢ Break & Retest  

3Ô∏è‚É£ Volumen  
‚Ä¢ Aumenta en ruptura ‚Üí confirmaci√≥n  
‚Ä¢ Disminuye en retroceso ‚Üí saludable  
‚Ä¢ Aumenta contra tu direcci√≥n ‚Üí peligro  

Si falta uno de los tres ‚Üí no operas.
""")

# =========================================================
# 5Ô∏è‚É£ ENTRADA
# =========================================================

st.subheader("5Ô∏è‚É£ ENTRADA (El gatillo)")

st.markdown("""
No es cuando sientes.
Es cuando hay confirmaci√≥n.

CALL:
‚Ä¢ Cierre por encima del nivel  
‚Ä¢ Retest que sostiene  
‚Ä¢ Volumen comprador  

PUT:
‚Ä¢ Rechazo claro  
‚Ä¢ Cierre debajo del nivel  
‚Ä¢ Volumen vendedor  

Timeframe ideal: 1‚Äì5 min.
""")

# =========================================================
# 6Ô∏è‚É£ INVALIDACI√ìN
# =========================================================

st.subheader("6Ô∏è‚É£ INVALIDACI√ìN")

st.markdown("""
Antes de entrar debes poder decir:

"Si el precio hace X, estoy equivocado."

Ejemplo:
Compras sobre VWAP.
Si cierra debajo con volumen ‚Üí sales.

Sin discusi√≥n.
Sin esperanza.
""")

# =========================================================
# 7Ô∏è‚É£ STOP
# =========================================================

st.subheader("7Ô∏è‚É£ STOP")

st.markdown("""
Debe tener l√≥gica estructural, no emocional.

Opciones:
‚Ä¢ Debajo de la vela de entrada  
‚Ä¢ √öltimo swing  
‚Ä¢ Nivel estructural perdido  

Para 0DTE:
Si no se mueve r√°pido a favor ‚Üí sales.
El tiempo trabaja en contra.
""")

# =========================================================
# 8Ô∏è‚É£ TARGET
# =========================================================

st.subheader("8Ô∏è‚É£ TARGET")

st.markdown("""
Profesional:
Cobrar estructura.

Target 1 (obligatorio):
‚Ä¢ VWAP  
‚Ä¢ PDL  
‚Ä¢ High del d√≠a  

Aqu√≠:
Tomas parcial  
Mueves stop a Break Even  

Target 2:
Solo si hay estructura + volumen + espacio.
""")

# =========================================================
# 9Ô∏è‚É£ HIGH / LOW DEL D√çA
# =========================================================

st.subheader("9Ô∏è‚É£ HIGH / LOW DEL D√çA")

st.markdown("""
El primer impulso fuerte muchas veces marca:
‚Ä¢ El m√°ximo del d√≠a  
‚Ä¢ O el m√≠nimo del d√≠a  

Luego suele haber:
‚Ä¢ Rango  
‚Ä¢ Reversiones  
‚Ä¢ Falsas rupturas  

Error com√∫n:
Perseguir el primer movimiento.

Profesional:
Esperar el retroceso.
""")
